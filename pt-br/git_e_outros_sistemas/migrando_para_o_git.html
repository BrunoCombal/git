<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Migrando para o Git | Learn Git</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="GitbookIO">
        <meta name="description" content="The entire Pro Git book.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../git_e_outros_sistemas/resumo.html" />
        
        
        <link rel="prev" href="../git_e_outros_sistemas/git_e_subversion.html" />
        

        <meta property="og:title" content="Migrando para o Git | Learn Git">
        <meta property="og:site_name" content="Learn Git">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/GitbookIO">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        
    <div class="book" data-github="GitbookIO/git" data-level="8.2" data-basepath=".." data-revision="1397503704833">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/GitbookIO/git" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/GitbookIO/git/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/GitbookIO/git/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1><a href="../" >Learn Git</a></h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/GitbookIO" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/GitbookIO/git/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/GitbookIO/git/edit/master/git_e_outros_sistemas/migrando_para_o_git.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="primeiros_passos/README.html">
                
                <a href="../primeiros_passos/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> Primeiros passos
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="primeiros_passos/sobre_controle_de_versao.html">
                            
                            <a href="../primeiros_passos/sobre_controle_de_versao.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Sobre Controle de Versão
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="primeiros_passos/uma_breve_historia_do_git.html">
                            
                            <a href="../primeiros_passos/uma_breve_historia_do_git.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Uma Breve História do Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="primeiros_passos/nocoes_basicas_de_git.html">
                            
                            <a href="../primeiros_passos/nocoes_basicas_de_git.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Noções Básicas de Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="primeiros_passos/instalando_git.html">
                            
                            <a href="../primeiros_passos/instalando_git.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Instalando Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="primeiros_passos/configuracao_inicial_do_git.html">
                            
                            <a href="../primeiros_passos/configuracao_inicial_do_git.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Configuração Inicial do Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="primeiros_passos/obtendo_ajuda.html">
                            
                            <a href="../primeiros_passos/obtendo_ajuda.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> Obtendo Ajuda
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path="primeiros_passos/resumo.html">
                            
                            <a href="../primeiros_passos/resumo.html">
                                <i class="fa fa-check"></i> <b>1.7.</b> Resumo
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="git_essencial/README.html">
                
                <a href="../git_essencial/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Git Essencial
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="git_essencial/obtendo_um_repositorio_git.html">
                            
                            <a href="../git_essencial/obtendo_um_repositorio_git.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Obtendo um Repositório Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="git_essencial/gravando_alteracoes_no_repositorio.html">
                            
                            <a href="../git_essencial/gravando_alteracoes_no_repositorio.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Gravando Alterações no Repositório
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="git_essencial/visualizando_o_historico_de_commits.html">
                            
                            <a href="../git_essencial/visualizando_o_historico_de_commits.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Visualizando o Histórico de Commits
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="git_essencial/desfazendo_coisas.html">
                            
                            <a href="../git_essencial/desfazendo_coisas.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Desfazendo Coisas
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="git_essencial/trabalhando_com_remotos.html">
                            
                            <a href="../git_essencial/trabalhando_com_remotos.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Trabalhando com Remotos
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="git_essencial/tagging.html">
                            
                            <a href="../git_essencial/tagging.html">
                                <i class="fa fa-check"></i> <b>2.6.</b> Tagging
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.7" data-path="git_essencial/dicas_e_truques.html">
                            
                            <a href="../git_essencial/dicas_e_truques.html">
                                <i class="fa fa-check"></i> <b>2.7.</b> Dicas e Truques
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.8" data-path="git_essencial/sumario.html">
                            
                            <a href="../git_essencial/sumario.html">
                                <i class="fa fa-check"></i> <b>2.8.</b> Sumário
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="ramificacao_branching_no_git/README.html">
                
                <a href="../ramificacao_branching_no_git/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Ramificação (Branching) no Git
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="ramificacao_branching_no_git/o_que_e_um_branch.html">
                            
                            <a href="../ramificacao_branching_no_git/o_que_e_um_branch.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> O que é um Branch
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="ramificacao_branching_no_git/basico_de_branch_e_merge.html">
                            
                            <a href="../ramificacao_branching_no_git/basico_de_branch_e_merge.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Básico de Branch e Merge
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="ramificacao_branching_no_git/gerenciamento_de_branches.html">
                            
                            <a href="../ramificacao_branching_no_git/gerenciamento_de_branches.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Gerenciamento de Branches
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="ramificacao_branching_no_git/fluxos_de_trabalho_com_branches.html">
                            
                            <a href="../ramificacao_branching_no_git/fluxos_de_trabalho_com_branches.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Fluxos de Trabalho com Branches
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="ramificacao_branching_no_git/branches_remotos.html">
                            
                            <a href="../ramificacao_branching_no_git/branches_remotos.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> Branches Remotos
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.6" data-path="ramificacao_branching_no_git/rebasing.html">
                            
                            <a href="../ramificacao_branching_no_git/rebasing.html">
                                <i class="fa fa-check"></i> <b>3.6.</b> Rebasing
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.7" data-path="ramificacao_branching_no_git/sumario.html">
                            
                            <a href="../ramificacao_branching_no_git/sumario.html">
                                <i class="fa fa-check"></i> <b>3.7.</b> Sumário
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="git_no_servidor/README.html">
                
                <a href="../git_no_servidor/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Git no Servidor
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="git_no_servidor/os_protocolos.html">
                            
                            <a href="../git_no_servidor/os_protocolos.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Os Protocolos
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="git_no_servidor/configurando_git_no_servidor.html">
                            
                            <a href="../git_no_servidor/configurando_git_no_servidor.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Configurando Git no Servidor
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="git_no_servidor/gerando_sua_chave_publica_ssh.html">
                            
                            <a href="../git_no_servidor/gerando_sua_chave_publica_ssh.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> Gerando Sua Chave Pública SSH
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.4" data-path="git_no_servidor/configurando_o_servidor.html">
                            
                            <a href="../git_no_servidor/configurando_o_servidor.html">
                                <i class="fa fa-check"></i> <b>4.4.</b> Configurando o Servidor
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.5" data-path="git_no_servidor/acesso_publico.html">
                            
                            <a href="../git_no_servidor/acesso_publico.html">
                                <i class="fa fa-check"></i> <b>4.5.</b> Acesso Público
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.6" data-path="git_no_servidor/gitweb.html">
                            
                            <a href="../git_no_servidor/gitweb.html">
                                <i class="fa fa-check"></i> <b>4.6.</b> GitWeb
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.7" data-path="git_no_servidor/gitosis.html">
                            
                            <a href="../git_no_servidor/gitosis.html">
                                <i class="fa fa-check"></i> <b>4.7.</b> Gitosis
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.8" data-path="git_no_servidor/gitolite.html">
                            
                            <a href="../git_no_servidor/gitolite.html">
                                <i class="fa fa-check"></i> <b>4.8.</b> Gitolite
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.9" data-path="git_no_servidor/servico_git.html">
                            
                            <a href="../git_no_servidor/servico_git.html">
                                <i class="fa fa-check"></i> <b>4.9.</b> Serviço Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.10" data-path="git_no_servidor/git_hospedado.html">
                            
                            <a href="../git_no_servidor/git_hospedado.html">
                                <i class="fa fa-check"></i> <b>4.10.</b> Git Hospedado
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.11" data-path="git_no_servidor/sumario.html">
                            
                            <a href="../git_no_servidor/sumario.html">
                                <i class="fa fa-check"></i> <b>4.11.</b> Sumário
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="git_distribuido/README.html">
                
                <a href="../git_distribuido/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Git Distribuído
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="git_distribuido/fluxos_de_trabalho_distribuidos.html">
                            
                            <a href="../git_distribuido/fluxos_de_trabalho_distribuidos.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Fluxos de Trabalho Distribuídos
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="git_distribuido/contribuindo_para_um_projeto.html">
                            
                            <a href="../git_distribuido/contribuindo_para_um_projeto.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Contribuindo Para Um Projeto
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="git_distribuido/mantendo_um_projeto.html">
                            
                            <a href="../git_distribuido/mantendo_um_projeto.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> Mantendo Um Projeto
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4" data-path="git_distribuido/resumo.html">
                            
                            <a href="../git_distribuido/resumo.html">
                                <i class="fa fa-check"></i> <b>5.4.</b> Resumo
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="ferramentas_do_git/README.html">
                
                <a href="../ferramentas_do_git/README.html">
                    <i class="fa fa-check"></i> <b>6.</b> Ferramentas do Git
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="6.1" data-path="ferramentas_do_git/selecao_de_revisao.html">
                            
                            <a href="../ferramentas_do_git/selecao_de_revisao.html">
                                <i class="fa fa-check"></i> <b>6.1.</b> Seleção de Revisão
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.2" data-path="ferramentas_do_git/area_de_selecao_interativa.html">
                            
                            <a href="../ferramentas_do_git/area_de_selecao_interativa.html">
                                <i class="fa fa-check"></i> <b>6.2.</b> Área de Seleção Interativa
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.3" data-path="ferramentas_do_git/fazendo_stash.html">
                            
                            <a href="../ferramentas_do_git/fazendo_stash.html">
                                <i class="fa fa-check"></i> <b>6.3.</b> Fazendo Stash
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.4" data-path="ferramentas_do_git/reescrevendo_o_historico.html">
                            
                            <a href="../ferramentas_do_git/reescrevendo_o_historico.html">
                                <i class="fa fa-check"></i> <b>6.4.</b> Reescrevendo o Histórico
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.5" data-path="ferramentas_do_git/depurando_com_git.html">
                            
                            <a href="../ferramentas_do_git/depurando_com_git.html">
                                <i class="fa fa-check"></i> <b>6.5.</b> Depurando com Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.6" data-path="ferramentas_do_git/submodulos.html">
                            
                            <a href="../ferramentas_do_git/submodulos.html">
                                <i class="fa fa-check"></i> <b>6.6.</b> Submódulos
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.7" data-path="ferramentas_do_git/merge_de_sub_arvore_subtree_merging.html">
                            
                            <a href="../ferramentas_do_git/merge_de_sub_arvore_subtree_merging.html">
                                <i class="fa fa-check"></i> <b>6.7.</b> Merge de Sub-árvore (Subtree Merging)
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.8" data-path="ferramentas_do_git/sumario.html">
                            
                            <a href="../ferramentas_do_git/sumario.html">
                                <i class="fa fa-check"></i> <b>6.8.</b> Sumário
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="7" data-path="customizando_o_git/README.html">
                
                <a href="../customizando_o_git/README.html">
                    <i class="fa fa-check"></i> <b>7.</b> Customizando o Git
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="7.1" data-path="customizando_o_git/configuracao_do_git.html">
                            
                            <a href="../customizando_o_git/configuracao_do_git.html">
                                <i class="fa fa-check"></i> <b>7.1.</b> Configuração do Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.2" data-path="customizando_o_git/atributos_git.html">
                            
                            <a href="../customizando_o_git/atributos_git.html">
                                <i class="fa fa-check"></i> <b>7.2.</b> Atributos Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.3" data-path="customizando_o_git/hooks_do_git.html">
                            
                            <a href="../customizando_o_git/hooks_do_git.html">
                                <i class="fa fa-check"></i> <b>7.3.</b> Hooks do Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.4" data-path="customizando_o_git/um_exemplo_de_politica_git_forcada.html">
                            
                            <a href="../customizando_o_git/um_exemplo_de_politica_git_forcada.html">
                                <i class="fa fa-check"></i> <b>7.4.</b> Um exemplo de Política Git Forçada
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.5" data-path="customizando_o_git/sumario.html">
                            
                            <a href="../customizando_o_git/sumario.html">
                                <i class="fa fa-check"></i> <b>7.5.</b> Sumário
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="8" data-path="git_e_outros_sistemas/README.html">
                
                <a href="../git_e_outros_sistemas/README.html">
                    <i class="fa fa-check"></i> <b>8.</b> Git e Outros Sistemas
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="8.1" data-path="git_e_outros_sistemas/git_e_subversion.html">
                            
                            <a href="../git_e_outros_sistemas/git_e_subversion.html">
                                <i class="fa fa-check"></i> <b>8.1.</b> Git e Subversion
                            </a>
                            
                        </li>
                    
                        <li  data-level="8.2" data-path="git_e_outros_sistemas/migrando_para_o_git.html">
                            
                            <a href="../git_e_outros_sistemas/migrando_para_o_git.html">
                                <i class="fa fa-check"></i> <b>8.2.</b> Migrando para o Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="8.3" data-path="git_e_outros_sistemas/resumo.html">
                            
                            <a href="../git_e_outros_sistemas/resumo.html">
                                <i class="fa fa-check"></i> <b>8.3.</b> Resumo
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="9" data-path="git_internamente/README.html">
                
                <a href="../git_internamente/README.html">
                    <i class="fa fa-check"></i> <b>9.</b> Git Internamente
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="9.1" data-path="git_internamente/encanamento_plumbing_e_porcelana_porcelain.html">
                            
                            <a href="../git_internamente/encanamento_plumbing_e_porcelana_porcelain.html">
                                <i class="fa fa-check"></i> <b>9.1.</b> Encanamento (Plumbing) e Porcelana (Porcelain)
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.2" data-path="git_internamente/objetos_do_git.html">
                            
                            <a href="../git_internamente/objetos_do_git.html">
                                <i class="fa fa-check"></i> <b>9.2.</b> Objetos do Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.3" data-path="git_internamente/referencias_git.html">
                            
                            <a href="../git_internamente/referencias_git.html">
                                <i class="fa fa-check"></i> <b>9.3.</b> Referencias Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.4" data-path="git_internamente/packfiles.html">
                            
                            <a href="../git_internamente/packfiles.html">
                                <i class="fa fa-check"></i> <b>9.4.</b> Packfiles
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.5" data-path="git_internamente/o_refspec.html">
                            
                            <a href="../git_internamente/o_refspec.html">
                                <i class="fa fa-check"></i> <b>9.5.</b> O Refspec
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.6" data-path="git_internamente/protocolos_de_transferencia.html">
                            
                            <a href="../git_internamente/protocolos_de_transferencia.html">
                                <i class="fa fa-check"></i> <b>9.6.</b> Protocolos de Transferência
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.7" data-path="git_internamente/manutencao_e_recuperacao_de_dados.html">
                            
                            <a href="../git_internamente/manutencao_e_recuperacao_de_dados.html">
                                <i class="fa fa-check"></i> <b>9.7.</b> Manutenção e Recuperação de Dados
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.8" data-path="git_internamente/resumo.html">
                            
                            <a href="../git_internamente/resumo.html">
                                <i class="fa fa-check"></i> <b>9.8.</b> Resumo
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 85.71428571428571%;min-width: 84.28571428571429%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../primeiros_passos/README.html" title="Primeiros passos" class="chapter done new-chapter" data-progress="1" style="left: 1.4285714285714286%;"></a>
    
        <a href="../primeiros_passos/sobre_controle_de_versao.html" title="Sobre Controle de Versão" class="chapter done " data-progress="1.1" style="left: 2.857142857142857%;"></a>
    
        <a href="../primeiros_passos/uma_breve_historia_do_git.html" title="Uma Breve História do Git" class="chapter done " data-progress="1.2" style="left: 4.285714285714286%;"></a>
    
        <a href="../primeiros_passos/nocoes_basicas_de_git.html" title="Noções Básicas de Git" class="chapter done " data-progress="1.3" style="left: 5.714285714285714%;"></a>
    
        <a href="../primeiros_passos/instalando_git.html" title="Instalando Git" class="chapter done " data-progress="1.4" style="left: 7.142857142857143%;"></a>
    
        <a href="../primeiros_passos/configuracao_inicial_do_git.html" title="Configuração Inicial do Git" class="chapter done " data-progress="1.5" style="left: 8.571428571428571%;"></a>
    
        <a href="../primeiros_passos/obtendo_ajuda.html" title="Obtendo Ajuda" class="chapter done " data-progress="1.6" style="left: 10%;"></a>
    
        <a href="../primeiros_passos/resumo.html" title="Resumo" class="chapter done " data-progress="1.7" style="left: 11.428571428571429%;"></a>
    
        <a href="../git_essencial/README.html" title="Git Essencial" class="chapter done new-chapter" data-progress="2" style="left: 12.857142857142858%;"></a>
    
        <a href="../git_essencial/obtendo_um_repositorio_git.html" title="Obtendo um Repositório Git" class="chapter done " data-progress="2.1" style="left: 14.285714285714286%;"></a>
    
        <a href="../git_essencial/gravando_alteracoes_no_repositorio.html" title="Gravando Alterações no Repositório" class="chapter done " data-progress="2.2" style="left: 15.714285714285714%;"></a>
    
        <a href="../git_essencial/visualizando_o_historico_de_commits.html" title="Visualizando o Histórico de Commits" class="chapter done " data-progress="2.3" style="left: 17.142857142857142%;"></a>
    
        <a href="../git_essencial/desfazendo_coisas.html" title="Desfazendo Coisas" class="chapter done " data-progress="2.4" style="left: 18.571428571428573%;"></a>
    
        <a href="../git_essencial/trabalhando_com_remotos.html" title="Trabalhando com Remotos" class="chapter done " data-progress="2.5" style="left: 20%;"></a>
    
        <a href="../git_essencial/tagging.html" title="Tagging" class="chapter done " data-progress="2.6" style="left: 21.428571428571427%;"></a>
    
        <a href="../git_essencial/dicas_e_truques.html" title="Dicas e Truques" class="chapter done " data-progress="2.7" style="left: 22.857142857142858%;"></a>
    
        <a href="../git_essencial/sumario.html" title="Sumário" class="chapter done " data-progress="2.8" style="left: 24.285714285714285%;"></a>
    
        <a href="../ramificacao_branching_no_git/README.html" title="Ramificação (Branching) no Git" class="chapter done new-chapter" data-progress="3" style="left: 25.714285714285715%;"></a>
    
        <a href="../ramificacao_branching_no_git/o_que_e_um_branch.html" title="O que é um Branch" class="chapter done " data-progress="3.1" style="left: 27.142857142857142%;"></a>
    
        <a href="../ramificacao_branching_no_git/basico_de_branch_e_merge.html" title="Básico de Branch e Merge" class="chapter done " data-progress="3.2" style="left: 28.571428571428573%;"></a>
    
        <a href="../ramificacao_branching_no_git/gerenciamento_de_branches.html" title="Gerenciamento de Branches" class="chapter done " data-progress="3.3" style="left: 30%;"></a>
    
        <a href="../ramificacao_branching_no_git/fluxos_de_trabalho_com_branches.html" title="Fluxos de Trabalho com Branches" class="chapter done " data-progress="3.4" style="left: 31.428571428571427%;"></a>
    
        <a href="../ramificacao_branching_no_git/branches_remotos.html" title="Branches Remotos" class="chapter done " data-progress="3.5" style="left: 32.857142857142854%;"></a>
    
        <a href="../ramificacao_branching_no_git/rebasing.html" title="Rebasing" class="chapter done " data-progress="3.6" style="left: 34.285714285714285%;"></a>
    
        <a href="../ramificacao_branching_no_git/sumario.html" title="Sumário" class="chapter done " data-progress="3.7" style="left: 35.714285714285715%;"></a>
    
        <a href="../git_no_servidor/README.html" title="Git no Servidor" class="chapter done new-chapter" data-progress="4" style="left: 37.142857142857146%;"></a>
    
        <a href="../git_no_servidor/os_protocolos.html" title="Os Protocolos" class="chapter done " data-progress="4.1" style="left: 38.57142857142857%;"></a>
    
        <a href="../git_no_servidor/git_hospedado.html" title="Git Hospedado" class="chapter done " data-progress="4.10" style="left: 40%;"></a>
    
        <a href="../git_no_servidor/sumario.html" title="Sumário" class="chapter done " data-progress="4.11" style="left: 41.42857142857143%;"></a>
    
        <a href="../git_no_servidor/configurando_git_no_servidor.html" title="Configurando Git no Servidor" class="chapter done " data-progress="4.2" style="left: 42.857142857142854%;"></a>
    
        <a href="../git_no_servidor/gerando_sua_chave_publica_ssh.html" title="Gerando Sua Chave Pública SSH" class="chapter done " data-progress="4.3" style="left: 44.285714285714285%;"></a>
    
        <a href="../git_no_servidor/configurando_o_servidor.html" title="Configurando o Servidor" class="chapter done " data-progress="4.4" style="left: 45.714285714285715%;"></a>
    
        <a href="../git_no_servidor/acesso_publico.html" title="Acesso Público" class="chapter done " data-progress="4.5" style="left: 47.142857142857146%;"></a>
    
        <a href="../git_no_servidor/gitweb.html" title="GitWeb" class="chapter done " data-progress="4.6" style="left: 48.57142857142857%;"></a>
    
        <a href="../git_no_servidor/gitosis.html" title="Gitosis" class="chapter done " data-progress="4.7" style="left: 50%;"></a>
    
        <a href="../git_no_servidor/gitolite.html" title="Gitolite" class="chapter done " data-progress="4.8" style="left: 51.42857142857143%;"></a>
    
        <a href="../git_no_servidor/servico_git.html" title="Serviço Git" class="chapter done " data-progress="4.9" style="left: 52.857142857142854%;"></a>
    
        <a href="../git_distribuido/README.html" title="Git Distribuído" class="chapter done new-chapter" data-progress="5" style="left: 54.285714285714285%;"></a>
    
        <a href="../git_distribuido/fluxos_de_trabalho_distribuidos.html" title="Fluxos de Trabalho Distribuídos" class="chapter done " data-progress="5.1" style="left: 55.714285714285715%;"></a>
    
        <a href="../git_distribuido/contribuindo_para_um_projeto.html" title="Contribuindo Para Um Projeto" class="chapter done " data-progress="5.2" style="left: 57.142857142857146%;"></a>
    
        <a href="../git_distribuido/mantendo_um_projeto.html" title="Mantendo Um Projeto" class="chapter done " data-progress="5.3" style="left: 58.57142857142857%;"></a>
    
        <a href="../git_distribuido/resumo.html" title="Resumo" class="chapter done " data-progress="5.4" style="left: 60%;"></a>
    
        <a href="../ferramentas_do_git/README.html" title="Ferramentas do Git" class="chapter done new-chapter" data-progress="6" style="left: 61.42857142857143%;"></a>
    
        <a href="../ferramentas_do_git/selecao_de_revisao.html" title="Seleção de Revisão" class="chapter done " data-progress="6.1" style="left: 62.857142857142854%;"></a>
    
        <a href="../ferramentas_do_git/area_de_selecao_interativa.html" title="Área de Seleção Interativa" class="chapter done " data-progress="6.2" style="left: 64.28571428571429%;"></a>
    
        <a href="../ferramentas_do_git/fazendo_stash.html" title="Fazendo Stash" class="chapter done " data-progress="6.3" style="left: 65.71428571428571%;"></a>
    
        <a href="../ferramentas_do_git/reescrevendo_o_historico.html" title="Reescrevendo o Histórico" class="chapter done " data-progress="6.4" style="left: 67.14285714285714%;"></a>
    
        <a href="../ferramentas_do_git/depurando_com_git.html" title="Depurando com Git" class="chapter done " data-progress="6.5" style="left: 68.57142857142857%;"></a>
    
        <a href="../ferramentas_do_git/submodulos.html" title="Submódulos" class="chapter done " data-progress="6.6" style="left: 70%;"></a>
    
        <a href="../ferramentas_do_git/merge_de_sub_arvore_subtree_merging.html" title="Merge de Sub-árvore (Subtree Merging)" class="chapter done " data-progress="6.7" style="left: 71.42857142857143%;"></a>
    
        <a href="../ferramentas_do_git/sumario.html" title="Sumário" class="chapter done " data-progress="6.8" style="left: 72.85714285714286%;"></a>
    
        <a href="../customizando_o_git/README.html" title="Customizando o Git" class="chapter done new-chapter" data-progress="7" style="left: 74.28571428571429%;"></a>
    
        <a href="../customizando_o_git/configuracao_do_git.html" title="Configuração do Git" class="chapter done " data-progress="7.1" style="left: 75.71428571428571%;"></a>
    
        <a href="../customizando_o_git/atributos_git.html" title="Atributos Git" class="chapter done " data-progress="7.2" style="left: 77.14285714285714%;"></a>
    
        <a href="../customizando_o_git/hooks_do_git.html" title="Hooks do Git" class="chapter done " data-progress="7.3" style="left: 78.57142857142857%;"></a>
    
        <a href="../customizando_o_git/um_exemplo_de_politica_git_forcada.html" title="Um exemplo de Política Git Forçada" class="chapter done " data-progress="7.4" style="left: 80%;"></a>
    
        <a href="../customizando_o_git/sumario.html" title="Sumário" class="chapter done " data-progress="7.5" style="left: 81.42857142857143%;"></a>
    
        <a href="../git_e_outros_sistemas/README.html" title="Git e Outros Sistemas" class="chapter done new-chapter" data-progress="8" style="left: 82.85714285714286%;"></a>
    
        <a href="../git_e_outros_sistemas/git_e_subversion.html" title="Git e Subversion" class="chapter done " data-progress="8.1" style="left: 84.28571428571429%;"></a>
    
        <a href="../git_e_outros_sistemas/migrando_para_o_git.html" title="Migrando para o Git" class="chapter done " data-progress="8.2" style="left: 85.71428571428571%;"></a>
    
        <a href="../git_e_outros_sistemas/resumo.html" title="Resumo" class="chapter  " data-progress="8.3" style="left: 87.14285714285714%;"></a>
    
        <a href="../git_internamente/README.html" title="Git Internamente" class="chapter  new-chapter" data-progress="9" style="left: 88.57142857142857%;"></a>
    
        <a href="../git_internamente/encanamento_plumbing_e_porcelana_porcelain.html" title="Encanamento (Plumbing) e Porcelana (Porcelain)" class="chapter  " data-progress="9.1" style="left: 90%;"></a>
    
        <a href="../git_internamente/objetos_do_git.html" title="Objetos do Git" class="chapter  " data-progress="9.2" style="left: 91.42857142857143%;"></a>
    
        <a href="../git_internamente/referencias_git.html" title="Referencias Git" class="chapter  " data-progress="9.3" style="left: 92.85714285714286%;"></a>
    
        <a href="../git_internamente/packfiles.html" title="Packfiles" class="chapter  " data-progress="9.4" style="left: 94.28571428571429%;"></a>
    
        <a href="../git_internamente/o_refspec.html" title="O Refspec" class="chapter  " data-progress="9.5" style="left: 95.71428571428571%;"></a>
    
        <a href="../git_internamente/protocolos_de_transferencia.html" title="Protocolos de Transferência" class="chapter  " data-progress="9.6" style="left: 97.14285714285714%;"></a>
    
        <a href="../git_internamente/manutencao_e_recuperacao_de_dados.html" title="Manutenção e Recuperação de Dados" class="chapter  " data-progress="9.7" style="left: 98.57142857142857%;"></a>
    
        <a href="../git_internamente/resumo.html" title="Resumo" class="chapter  " data-progress="9.8" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_816">
                    
                        <h1 id="migrando-para-o-git">Migrando para o Git</h1>
<p>Se você tem uma base de código existente em outro VCS mas você decidiu começar a usar o Git, você deve migrar seu projeto de um jeito ou outro. Esta seção vai mostrar alguns importadores que estão incluídos no Git para sistemas comuns e demonstra como desenvolver o seu importador personalizado.</p>
<h2 id="importando">Importando</h2>
<p>Você vai aprender como importar dados de dois dos maiores sistemas SCM utilizados profissionalmente — Subversion e Perforce — isso porque eles são usados pela maioria dos usuários que ouço falar, e porque ferramentas de alta qualidade para ambos os sistemas são distribuídos com Git.</p>
<h2 id="subversion">Subversion</h2>
<p>Se você ler a seção anterior sobre o uso do <code>git svn</code>, você pode facilmente usar essas instruções para <code>git svn clone</code> um repositório; então, parar de usar o servidor Subversion, fazer um push para um servidor Git novo, e começar a usar ele. Se precisar do histórico, você pode conseguir isso tão rapidamente como extrair os dados do servidor Subversion (que pode demorar um pouco).</p>
<p>No entanto, a importação não é perfeita; e já que vai demorar tanto tempo, você pode fazer isso direito. O primeiro problema é a informação do autor. No Subversion, cada pessoa commitando tem um usuário no sistema que está registrado nas informações de commit. Os exemplos nas seções anteriores mostram <code>schacon</code> em alguns lugares, como a saída do <code>blame</code> e do <code>git svn log</code>. Se você deseja mapear isso para obter melhores dados de autor no Git, você precisa fazer um mapeamento dos usuários do Subversion para os autores Git. Crie um arquivo chamado <code>users.txt</code> que tem esse mapeamento em um formato como este:</p>
<pre><code>schacon = <span class="hljs-constant">Scott</span> <span class="hljs-constant">Chacon</span> &lt;schacon<span class="hljs-variable">@geemail</span>.com&gt;
selse = <span class="hljs-constant">Someo</span> <span class="hljs-constant">Nelse</span> &lt;selse<span class="hljs-variable">@geemail</span>.com&gt;
</code></pre><p>Para obter uma lista dos nomes de autores que o SVN usa, você pode executar isto:</p>
<pre><code>$ svn <span class="hljs-keyword">log</span> ^<span class="hljs-subst">/</span> <span class="hljs-subst">--</span><span class="hljs-built_in">xml</span> <span class="hljs-subst">|</span> grep <span class="hljs-attribute">-P</span> <span class="hljs-string">"^&lt;author"</span> <span class="hljs-subst">|</span> sort <span class="hljs-attribute">-u</span> <span class="hljs-subst">|</span> <span class="hljs-subst">\</span>
      perl <span class="hljs-attribute">-pe</span> <span class="hljs-string">'s/&lt;author&gt;(.*?)&lt;\/author&gt;/$1 = /'</span> <span class="hljs-subst">&gt;</span> users<span class="hljs-built_in">.</span>txt
</code></pre><p>Isso te dá a saída do log em formato XML — você pode pesquisar pelos autores, criar uma lista única, e depois tirar o XML. (Obviamente isso só funciona em uma máquina com <code>grep</code>, <code>sort</code>, e <code>perl</code> instalados.) Em seguida, redirecione a saída em seu arquivo users.txt assim, você pode adicionar os dados de usuários do Git equivalentes ao lado de cada entrada.</p>
<p>Você pode fornecer esse arquivo para <code>git svn</code> para ajudar a mapear os dados do autor com mais precisão. Você também pode dizer ao <code>git svn</code> para não incluir os metadados que o Subversion normalmente importa, passando <code>--no-metadata</code> para o comando <code>clone</code> ou <code>init</code>. Isso faz com que o seu comando <code>import</code> fique parecido com este:</p>
<pre><code>$ git<span class="hljs-attribute">-svn</span> clone http:<span class="hljs-comment">//my-project.googlecode.com/svn/ \</span>
      <span class="hljs-subst">--</span>authors<span class="hljs-attribute">-file</span><span class="hljs-subst">=</span>users<span class="hljs-built_in">.</span>txt <span class="hljs-subst">--</span>no<span class="hljs-attribute">-metadata</span> <span class="hljs-attribute">-s</span> my_project
</code></pre><p>Agora você deve ter uma importação Subversion mais agradável no seu diretório <code>my_project</code>. Em vez de commits ele se parece com isso</p>
<pre><code>commit <span class="hljs-number">37</span>efa680e8473b615de980fa935944215428a35a
<span class="hljs-label">Author:</span> schacon &lt;schacon<span class="hljs-localvars">@4</span>c93b258-<span class="hljs-number">373</span>f-<span class="hljs-number">11</span>de-be05-<span class="hljs-number">5</span>f7a86268029&gt;
<span class="hljs-label">Date:</span>   Sun May <span class="hljs-number">3</span> <span class="hljs-number">00</span>:<span class="hljs-number">12</span>:<span class="hljs-number">22</span> <span class="hljs-number">2009</span> +<span class="hljs-number">0000</span>

    fixed install - go to trunk

    git-svn-id: https://my-project<span class="hljs-preprocessor">.googlecode</span><span class="hljs-preprocessor">.com</span>/svn/trunk<span class="hljs-localvars">@94</span> <span class="hljs-number">4</span>c93b258-<span class="hljs-number">373</span>f-<span class="hljs-number">11</span>de-
    be05-<span class="hljs-number">5</span>f7a86268029
</code></pre><p>they look like this:</p>
<pre><code><span class="hljs-operator"><span class="hljs-keyword">commit</span> <span class="hljs-number">03</span>a8785f44c8ea5cdb0e8834b7c8e6c469be2ff2
Author: Scott Chacon &lt;schacon@geemail.com&gt;
<span class="hljs-keyword">Date</span>:   Sun May <span class="hljs-number">3</span> <span class="hljs-number">00</span>:<span class="hljs-number">12</span>:<span class="hljs-number">22</span> <span class="hljs-number">2009</span> +<span class="hljs-number">0000</span>

    fixed install - <span class="hljs-keyword">go</span> <span class="hljs-keyword">to</span> trunk</span>
</code></pre><p>Não só o campo Author parece muito melhor, mas o <code>git-svn-id</code> não está mais lá também.</p>
<p>Você precisa fazer um pouco de limpeza <code>post-import</code>. Por um lado, você deve limpar as referências estranhas que <code>git svn</code> configura. Primeiro você vai migrar as tags para que sejam tags reais, em vez de estranhos branches remotos, e então você vai migrar o resto dos branches de modo que eles sejam locais.</p>
<p>Para migrar as tags para que sejam tags Git adequadas, execute</p>
<pre><code><span class="hljs-variable">$ </span>cp -<span class="hljs-constant">Rf</span> .git/refs/remotes/tags/* .git/refs/tags/
<span class="hljs-variable">$ </span>rm -<span class="hljs-constant">Rf</span> .git/refs/remotes/tags
</code></pre><p>Isso leva as referências que eram branches remotos que começavam com <code>tag/</code> e torna-os tags (leves) reais.</p>
<p>Em seguida, importamos o resto das referências em <code>refs/remotes</code> para serem branches locais:</p>
<pre><code><span class="hljs-variable">$ </span>cp -<span class="hljs-constant">Rf</span> .git/refs/remotes/* .git/refs/heads/
<span class="hljs-variable">$ </span>rm -<span class="hljs-constant">Rf</span> .git/refs/remotes
</code></pre><p>Agora todos os branches velhos são branches Git reais e todas as tags antigas são tags Git reais. A última coisa a fazer é adicionar seu servidor Git novo como um remoto e fazer um push nele. Aqui está um exemplo de como adicionar o servidor como um remoto:</p>
<pre><code><span class="hljs-variable">$ </span>git remote add origin git<span class="hljs-variable">@my</span>-git-<span class="hljs-symbol">server:</span>myrepository.git
</code></pre><p>Já que você quer que todos os seus branches e tags sejam enviados, você pode executar isto:</p>
<pre><code><span class="hljs-comment">$</span> <span class="hljs-comment">git</span> <span class="hljs-comment">push</span> <span class="hljs-comment">origin</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">all</span>
</code></pre><p>Todos os seus branches e tags devem estar em seu servidor Git novo em uma agradável importação limpa.</p>
<h2 id="perforce">Perforce</h2>
<p>O sistema seguinte de que importaremos é o Perforce. Um importador Perforce também é distribuído com Git, mas apenas na seção <code>contrib</code> do código fonte — que não está disponível por padrão como <code>git svn</code>. Para executá-lo, você deve obter o código fonte Git, que você pode baixar a partir de git.kernel.org:</p>
<pre><code>$ git clone git://git<span class="hljs-preprocessor">.kernel</span><span class="hljs-preprocessor">.org</span>/pub/scm/git/git<span class="hljs-preprocessor">.git</span>
$ cd git/contrib/fast-import
</code></pre><p>Neste diretório <code>fast-import</code>, você deve encontrar um script Python executável chamado <code>git-p4</code>. Você deve ter o Python e a ferramenta <code>p4</code> instalados em sua máquina para esta importação funcionar. Por exemplo, você vai importar o projeto Jam do depósito público Perforce. Para configurar o seu cliente, você deve exportar a variável de ambiente P4PORT para apontar para o depósito Perforce:</p>
<pre><code>$ <span class="hljs-keyword">export</span> P4PORT=<span class="hljs-keyword">public</span>.perforce.com:<span class="hljs-number">1666</span>
</code></pre><p>Execute o comando <code>git-p4 clone</code> para importar o projeto Jam do servidor Perforce, fornecendo o caminho do depósito e do projeto e o caminho no qual você deseja importar o projeto:</p>
<pre><code>$ git<span class="hljs-attribute">-p4</span> clone <span class="hljs-comment">//public/jam/src@all /opt/p4import</span>
Importing from <span class="hljs-comment">//public/jam/src@all into /opt/p4import</span>
Reinitialized existing Git repository <span class="hljs-keyword">in</span> /opt/p4import<span class="hljs-subst">/</span><span class="hljs-built_in">.</span>git<span class="hljs-subst">/</span>
<span class="hljs-keyword">Import</span> destination: refs/remotes/p4/master
Importing revision <span class="hljs-number">4409</span> (<span class="hljs-number">100</span><span class="hljs-subst">%</span>)
</code></pre><p>Se você for para o diretório <code>/opt/p4import</code> e executar <code>git log</code>, você pode ver o seu trabalho importado:</p>
<pre><code>$ git log -2
<span class="hljs-operator"><span class="hljs-keyword">commit</span> <span class="hljs-number">1</span>fd4ec126171790efd2db83548b85b1bbbc07dc2
Author: Perforce staff &lt;support@perforce.com&gt;
<span class="hljs-keyword">Date</span>:   Thu Aug <span class="hljs-number">19</span> <span class="hljs-number">10</span>:<span class="hljs-number">18</span>:<span class="hljs-number">45</span> <span class="hljs-number">2004</span> -<span class="hljs-number">0800</span>

    <span class="hljs-keyword">Drop</span> <span class="hljs-string">'rc3'</span> moniker <span class="hljs-keyword">of</span> jam-<span class="hljs-number">2.5</span>.  Folded rc2 <span class="hljs-keyword">and</span> rc3 RELNOTES <span class="hljs-keyword">into</span>
    the main part <span class="hljs-keyword">of</span> the document.  Built new tar/zip balls.

    <span class="hljs-keyword">Only</span> <span class="hljs-number">16</span> months later.

    [git-p4: depot-paths = <span class="hljs-string">"//public/jam/src/"</span>: change = <span class="hljs-number">4409</span>]

<span class="hljs-keyword">commit</span> ca8870db541a23ed867f38847eda65bf4363371d
Author: Richard Geiger &lt;rmg@perforce.com&gt;
<span class="hljs-keyword">Date</span>:   Tue Apr <span class="hljs-number">22</span> <span class="hljs-number">20</span>:<span class="hljs-number">51</span>:<span class="hljs-number">34</span> <span class="hljs-number">2003</span> -<span class="hljs-number">0800</span>

    <span class="hljs-keyword">Update</span> derived jamgram.c

    [git-p4: depot-paths = <span class="hljs-string">"//public/jam/src/"</span>: change = <span class="hljs-number">3108</span>]</span>
</code></pre><p>Você pode ver o identificador do <code>git-p4</code> em cada commit. É bom manter esse identificador lá, caso haja necessidade de referenciar o número de mudança Perforce mais tarde. No entanto, se você gostaria de remover o identificador, agora é a hora de fazê-lo — antes de você começar a trabalhar no novo repositório. Você pode usar <code>git filter-branch</code> para remover as strings identificadoras em massa:</p>
<pre><code>$ git filter-branch --msg-filter <span class="hljs-comment">'</span>
        sed -e <span class="hljs-string">"/^\[git-p4:/d"</span>
<span class="hljs-comment">'</span>
Rewrite <span class="hljs-number">1</span>fd4ec126171790efd2db83548b85b1bbbc07dc2 (<span class="hljs-number">123</span>/<span class="hljs-number">123</span>)
Ref <span class="hljs-comment">'refs/heads/master' was rewritten</span>
</code></pre><p>Se você executar o <code>git log</code>, você pode ver que todas as checksums SHA-1 dos commits mudaram, mas as strings do <code>git-p4</code> não estão mais nas mensagens de commit:</p>
<pre><code>$ git log -2
<span class="hljs-operator"><span class="hljs-keyword">commit</span> <span class="hljs-number">10</span>a16d60cffca14d454a15c6164378f4082bc5b0
Author: Perforce staff &lt;support@perforce.com&gt;
<span class="hljs-keyword">Date</span>:   Thu Aug <span class="hljs-number">19</span> <span class="hljs-number">10</span>:<span class="hljs-number">18</span>:<span class="hljs-number">45</span> <span class="hljs-number">2004</span> -<span class="hljs-number">0800</span>

    <span class="hljs-keyword">Drop</span> <span class="hljs-string">'rc3'</span> moniker <span class="hljs-keyword">of</span> jam-<span class="hljs-number">2.5</span>.  Folded rc2 <span class="hljs-keyword">and</span> rc3 RELNOTES <span class="hljs-keyword">into</span>
    the main part <span class="hljs-keyword">of</span> the document.  Built new tar/zip balls.

    <span class="hljs-keyword">Only</span> <span class="hljs-number">16</span> months later.

<span class="hljs-keyword">commit</span> <span class="hljs-number">2</span>b6c6db311dd76c34c66ec1c40a49405e6b527b2
Author: Richard Geiger &lt;rmg@perforce.com&gt;
<span class="hljs-keyword">Date</span>:   Tue Apr <span class="hljs-number">22</span> <span class="hljs-number">20</span>:<span class="hljs-number">51</span>:<span class="hljs-number">34</span> <span class="hljs-number">2003</span> -<span class="hljs-number">0800</span>

    <span class="hljs-keyword">Update</span> derived jamgram.c</span>
</code></pre><p>Sua importação está pronta para ser enviada (push) para o seu novo servidor Git.</p>
<h2 id="um-importador-customizado">Um Importador Customizado</h2>
<p>Se o sistema não é o Subversion ou Perforce, você deve procurar um importador online — importadores de qualidade estão disponíveis para CVS, Clear Case, Visual Source Safe, e até mesmo um diretório de arquivos. Se nenhuma destas ferramentas funcionar para você, você tem uma ferramenta mais rara, ou você precisa de um processo de importação personalizado, você deve usar <code>git fast-import</code>. Este comando lê instruções simples da stdin para gravar dados Git específicos. É muito mais fácil criar objetos Git desta forma do que executar os comandos crús do Git ou tentar escrever os objetos crús (ver <em>Capítulo 9</em> para mais informações). Dessa forma, você pode escrever um script de importação que lê as informações necessárias do sistema de que está importando e imprimir instruções simples no stdout. Você pode então executar este programa e redirecionar sua saída através do <code>git fast-import</code>.</p>
<p>Para demonstrar rapidamente, você vai escrever um importador simples. Suponha que você faz backup do seu projeto de vez em quando copiando o diretório em um diretório de backup nomeado por data <code>back_YYYY_MM_DD</code>, e você deseja importar ele no Git. Sua estrutura de diretórios fica assim:</p>
<pre><code><span class="hljs-variable">$ </span>ls /opt/import_from
back_2009_01_02
back_2009_01_04
back_2009_01_14
back_2009_02_03
current
</code></pre><p>Para importar um diretório Git, você precisa rever como o Git armazena seus dados. Como você pode lembrar, Git é fundamentalmente uma lista encadeada de objetos commit que apontam para um snapshot de um conteúdo. Tudo que você tem a fazer é dizer ao <code>fast-import</code> quais são os snapshots de conteúdo, que dados de commit apontam para eles, e a ordem em que estão dispostos. Sua estratégia será a de passar pelos snapshots um de cada vez e criar commits com o conteúdo de cada diretório, ligando cada commit de volta para a anterior.</p>
<p>Como você fez na seção &quot;Um exemplo de Política Git Forçada&quot; do <em>Capítulo 7</em>, vamos escrever isso em Ruby, porque é o que eu geralmente uso e tende a ser fácil de ler. Você pode escrever este exemplo muito facilmente em qualquer linguagem que você esteja familiarizado — ele só precisa imprimir a informação apropriada para o stdout. E, se você estiver rodando no Windows, isso significa que você terá que tomar cuidados especiais para não introduzir carriage returns no final de suas linhas — git fast-import só aceita line feeds (LF) e não aceita carriage return line feeds (CRLF) que o Windows usa.</p>
<p>Para começar, você vai mudar para o diretório de destino e identificar cada subdiretório, cada um dos quais é um instantâneo que você deseja importar como um commit. Você vai entrar em cada subdiretório e imprimir os comandos necessários para exportá-los. Seu loop básico principal fica assim:</p>
<pre><code>last_mark = nil

<span class="hljs-comment"># loop through the directories</span>
Dir.chdir(ARGV[<span class="hljs-number">0</span>]) <span class="hljs-built_in">do</span>
  Dir.glob(<span class="hljs-string">"*"</span>).<span class="hljs-keyword">each</span> <span class="hljs-built_in">do</span> |dir|
    next <span class="hljs-keyword">if</span> File.<span class="hljs-built_in">file</span>?(dir)

    <span class="hljs-comment"># move into the target directory</span>
    Dir.chdir(dir) <span class="hljs-built_in">do</span>
      last_mark = print_export(dir, last_mark)
    <span class="hljs-function"><span class="hljs-keyword">end</span></span>
  <span class="hljs-function"><span class="hljs-keyword">end</span></span>
<span class="hljs-function"><span class="hljs-keyword">end</span></span>
</code></pre><p>Você executa o <code>print_export</code> dentro de cada diretório, o que pega o manifest e marca do snapshot anterior e retorna o manifest e marca deste; dessa forma, você pode ligá-los corretamente. &quot;Mark&quot; é o termo <code>fast-import</code> para um identificador que você dá a um commit; como você cria commits, você dá a cada um uma marca que você pode usar para ligar ele a outros commits. Então, a primeira coisa a fazer em seu método <code>print_export</code> é gerar uma mark do nome do diretório:</p>
<pre><code><span class="hljs-attribute">mark </span>=<span class="hljs-string"> convert_dir_to_mark(dir)</span>
</code></pre><p>Você vai fazer isso criando uma matriz de diretórios e usar o valor do índice como a marca, porque uma marca deve ser um inteiro. Seu método deve se parecer com este:</p>
<pre><code><span class="hljs-variable">$marks</span> = []
<span class="hljs-function"><span class="hljs-keyword">def</span> </span>convert_dir_to_mark(dir)
  <span class="hljs-keyword">if</span> !<span class="hljs-variable">$marks</span>.<span class="hljs-keyword">include</span>?(dir)
    <span class="hljs-variable">$marks</span> &lt;&lt; dir
  <span class="hljs-keyword">end</span>
  (<span class="hljs-variable">$marks</span>.index(dir) + <span class="hljs-number">1</span>).to_s
<span class="hljs-keyword">end</span>
</code></pre><p>Agora que você tem uma representação usando um número inteiro de seu commit, você precisa de uma data para os metadados do commit. Como a data está expressa no nome do diretório, você vai utilizá-la. A próxima linha em seu arquivo <code>print_export</code> é</p>
<pre><code><span class="hljs-attribute">date </span>=<span class="hljs-string"> convert_dir_to_date(dir)</span>
</code></pre><p>where <code>convert_dir_to_date</code> is defined as</p>
<pre><code>def convert_dir_to_date(dir)
  <span class="hljs-keyword">if</span> dir == <span class="hljs-string">'current'</span>
    <span class="hljs-constant">return</span> Time.now().to_i
  <span class="hljs-keyword">else</span>
    dir = dir.gsub(<span class="hljs-string">'back_'</span>, <span class="hljs-string">''</span>)
    (year, month, day) = dir.<span class="hljs-built_in">split</span>(<span class="hljs-string">'_'</span>)
    <span class="hljs-constant">return</span> Time.<span class="hljs-built_in">local</span>(year, month, day).to_i
  <span class="hljs-function"><span class="hljs-keyword">end</span></span>
<span class="hljs-function"><span class="hljs-keyword">end</span></span>
</code></pre><p>Que retorna um valor inteiro para a data de cada diretório. A última peça de meta-dado que você precisa para cada commit são os dados do committer (autor do commit), que você codificar em uma variável global:</p>
<pre><code><span class="hljs-variable">$author</span> = <span class="hljs-string">'Scott Chacon &lt;schacon@example.com&gt;'</span>
</code></pre><p>Agora você está pronto para começar a imprimir os dados de commit para o seu importador. As primeiras informações indicam que você está definindo um objeto commit e que branch ele está, seguido pela mark que você gerou, a informação do committer e mensagem de commit, e o commit anterior, se houver. O código fica assim:</p>
<pre><code><span class="hljs-comment"># print the import information</span>
puts <span class="hljs-string">'commit refs/heads/master'</span>
puts <span class="hljs-string">'mark :'</span> + mark
puts <span class="hljs-string">"committer <span class="hljs-subst">#{<span class="hljs-variable">$author</span>}</span> <span class="hljs-subst">#{date}</span> -0700"</span>
export_data(<span class="hljs-string">'imported from '</span> + dir)
puts <span class="hljs-string">'from :'</span> + last_mark <span class="hljs-keyword">if</span> last_mark
</code></pre><p>Você coloca um valor estático (hardcode) do fuso horário (-0700), porque é mais fácil. Se estiver importando de outro sistema, você deve especificar o fuso horário como um offset.
A mensagem de confirmação deve ser expressa em um formato especial:</p>
<pre><code><span class="hljs-typedef"><span class="hljs-keyword">data</span> <span class="hljs-container">(<span class="hljs-title">size</span>)</span>\n<span class="hljs-container">(<span class="hljs-title">contents</span>)</span></span>
</code></pre><p>O formato consiste dos dados de texto, o tamanho dos dados a serem lidos, uma quebra de linha, e finalmente os dados. Como você precisa utilizar o mesmo formato para especificar o conteúdo de arquivos mais tarde, você pode criar um método auxiliar, <code>export_data</code>:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">def</span> </span>export_data(string)
  print <span class="hljs-string">"data <span class="hljs-subst">#{string.size}</span>\n<span class="hljs-subst">#{string}</span>"</span>
<span class="hljs-keyword">end</span>
</code></pre><p>Tudo o que resta é especificar o conteúdo do arquivo para cada snapshot. Isso é fácil, porque você tem cada um em um diretório — você pode imprimir o comando <code>deleteall</code> seguido do conteúdo de cada arquivo no diretório. Git, então, grava cada instantâneo apropriadamente:</p>
<pre><code>puts <span class="hljs-string">'deleteall'</span>
Dir.glob(<span class="hljs-string">"**/*"</span>).<span class="hljs-keyword">each</span> <span class="hljs-built_in">do</span> |<span class="hljs-built_in">file</span>|
  next <span class="hljs-keyword">if</span> !File.<span class="hljs-built_in">file</span>?(<span class="hljs-built_in">file</span>)
  inline_data(<span class="hljs-built_in">file</span>)
<span class="hljs-function"><span class="hljs-keyword">end</span></span>
</code></pre><p>Nota: Como muitos sistemas tratam suas revisões, como mudanças de um commit para outro, fast-import também pode receber comandos com cada commit para especificar quais arquivos foram adicionados, removidos ou modificados e o que os novos conteúdos são. Você poderia calcular as diferenças entre os snapshots e fornecer apenas estes dados, mas isso é mais complexo — assim como você pode dar ao Git todos os dados e deixá-lo descobrir. Se isto for mais adequado aos seus dados, verifique a man page (manual) do <code>fast-import</code> para obter detalhes sobre como fornecer seus dados desta forma.</p>
<p>O formato para listar o conteúdo de arquivos novos ou especificar um arquivo modificado com o novo conteúdo é o seguinte:</p>
<pre><code>M <span class="hljs-number">644</span> <span class="hljs-keyword">inline</span> path/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">file</span>
data (size)
(<span class="hljs-keyword">file</span> contents)
</code></pre><p>Aqui, 644 é o modo (se você tiver arquivos executáveis, é preciso detectá-los e especificar 755), e inline diz que você vai listar o conteúdo imediatamente após esta linha. O seu método <code>inline_data</code> deve se parecer com este:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">def</span> </span>inline_data(file, code = <span class="hljs-string">'M'</span>, mode = <span class="hljs-string">'644'</span>)
  content = <span class="hljs-constant">File</span>.read(file)
  puts <span class="hljs-string">"<span class="hljs-subst">#{code}</span> <span class="hljs-subst">#{mode}</span> inline <span class="hljs-subst">#{file}</span>"</span>
  export_data(content)
<span class="hljs-keyword">end</span>
</code></pre><p>Você reutiliza o método <code>export_data</code> definido anteriormente, porque é da mesma forma que você especificou os seus dados de mensagem de commit.</p>
<p>A última coisa que você precisa fazer é retornar a mark atual para que possa ser passada para a próxima iteração:</p>
<pre><code><span class="hljs-keyword">return</span> mark
</code></pre><p>NOTA: Se você estiver usando Windows, você vai precisar se certificar de que você adiciona um passo extra. Como já relatado anteriormente, o Windows usa CRLF para quebras de linha enquanto git fast-import aceita apenas LF. Para contornar este problema e usar git fast-import, você precisa dizer ao ruby para usar LF em vez de CRLF:</p>
<pre><code><span class="hljs-variable">$stdout</span>.<span class="hljs-keyword">binmode</span>
</code></pre><p>Isso é tudo. Se você executar este script, você vai ter um conteúdo parecido com isto:</p>
<pre><code>$ ruby import.rb /opt/import_from
commit refs/heads/master
mark :<span class="hljs-number">1</span>
committer Scott Chacon &lt;schacon@geemail.com&gt; <span class="hljs-number">1230883200</span> -<span class="hljs-number">0700</span>
data <span class="hljs-number">29</span>
imported <span class="hljs-built_in">from</span> back_2009_01_02deleteall
M <span class="hljs-number">644</span> inline <span class="hljs-built_in">file</span>.rb
data <span class="hljs-number">12</span>
<span class="hljs-built_in">version</span> <span class="hljs-constant">two</span>
commit refs/heads/master
mark :<span class="hljs-number">2</span>
committer Scott Chacon &lt;schacon@geemail.com&gt; <span class="hljs-number">1231056000</span> -<span class="hljs-number">0700</span>
data <span class="hljs-number">29</span>
imported <span class="hljs-built_in">from</span> back_2009_01_04from :<span class="hljs-number">1</span>
deleteall
M <span class="hljs-number">644</span> inline <span class="hljs-built_in">file</span>.rb
data <span class="hljs-number">14</span>
<span class="hljs-built_in">version</span> <span class="hljs-constant">three</span>
M <span class="hljs-number">644</span> inline <span class="hljs-built_in">new</span>.rb
data <span class="hljs-number">16</span>
<span class="hljs-built_in">new</span> <span class="hljs-built_in">version</span> <span class="hljs-constant">one</span>
(...)
</code></pre><p>Para executar o importador, redirecione a saída através do <code>git fast-import</code> enquanto estiver no diretório Git que você quer importar. Você pode criar um novo diretório e executar <code>git init</code> nele para iniciar, e depois executar o script:</p>
<pre><code>$ git init
Initialized empty Git repository in /opt/import<span class="hljs-emphasis">_to/.git/
$ ruby import.rb /opt/import_</span>from | git fast-import
<span class="hljs-header">git-fast-import statistics:
---------------------------------------------------------------------</span>
Alloc'd objects:       5000
Total objects:           18 (         1 duplicates                  )
<span class="hljs-code">      blobs  :            7 (         1 duplicates          0 deltas)</span>
<span class="hljs-code">      trees  :            6 (         0 duplicates          1 deltas)</span>
<span class="hljs-code">      commits:            5 (         0 duplicates          0 deltas)</span>
<span class="hljs-code">      tags   :            0 (         0 duplicates          0 deltas)</span>
Total branches:           1 (         1 loads     )
<span class="hljs-code">      marks:           1024 (         5 unique    )</span>
<span class="hljs-code">      atoms:              3</span>
Memory total:          2255 KiB
<span class="hljs-code">       pools:          2098 KiB</span>
<span class="hljs-header">     objects:           156 KiB
---------------------------------------------------------------------</span>
pack<span class="hljs-emphasis">_report: getpagesize()            =       4096
pack_</span>report: core.packedGitWindowSize =   33554432
pack<span class="hljs-emphasis">_report: core.packedGitLimit      =  268435456
pack_</span>report: pack<span class="hljs-emphasis">_used_</span>ctr            =          9
pack<span class="hljs-emphasis">_report: pack_</span>mmap<span class="hljs-emphasis">_calls          =          5
pack_</span>report: pack<span class="hljs-emphasis">_open_</span>windows        =          1 /          1
<span class="hljs-header">pack_report: pack_mapped              =       1356 /       1356
---------------------------------------------------------------------</span>
</code></pre><p>Como você pode ver, quando for concluído com êxito, ele mostra um monte de estatísticas sobre o que ele realizou. Neste caso, você importou um total de 18 objetos para 5 commits em 1 branch. Agora, você pode executar <code>git log</code> para ver seu novo hostórico:</p>
<pre><code>$ git log -2
<span class="hljs-operator"><span class="hljs-keyword">commit</span> <span class="hljs-number">10</span>bfe7d22ce15ee25b60a824c8982157ca593d41
Author: Scott Chacon &lt;schacon@example.com&gt;
<span class="hljs-keyword">Date</span>:   Sun May <span class="hljs-number">3</span> <span class="hljs-number">12</span>:<span class="hljs-number">57</span>:<span class="hljs-number">39</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    imported <span class="hljs-keyword">from</span> <span class="hljs-keyword">current</span>

<span class="hljs-keyword">commit</span> <span class="hljs-number">7e519590</span>de754d079dd73b44d695a42c9d2df452
Author: Scott Chacon &lt;schacon@example.com&gt;
<span class="hljs-keyword">Date</span>:   Tue Feb <span class="hljs-number">3</span> <span class="hljs-number">01</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    imported <span class="hljs-keyword">from</span> back_2009_02_03</span>
</code></pre><p>Ai está — um repositório Git limpo. É importante notar que não é feito check-out de nada — você não tem arquivos em seu diretório de trabalho no início. Para obtê-los, você deve redefinir o seu branch para <code>master</code>:</p>
<pre><code>$ ls
$ git reset <span class="hljs-comment">--hard master</span>
HEAD <span class="hljs-keyword">is</span> now <span class="hljs-keyword">at</span> <span class="hljs-number">10</span>bfe7d imported <span class="hljs-keyword">from</span> current
$ ls
<span class="hljs-type">file</span>.rb  lib
</code></pre><p>Você pode fazer muito mais com a ferramenta <code>fast-import</code> — lidar com diferentes modos, dados binários, múltiplos branches e mesclagem (merging), tags, indicadores de progresso, e muito mais. Uma série de exemplos de cenários mais complexos estão disponíveis no diretório <code>contrib/fast-import</code> do código-fonte Git, um dos melhores é o script <code>git-p4</code> que acabei de mostrar.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../git_e_outros_sistemas/git_e_subversion.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../git_e_outros_sistemas/resumo.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
        <link rel="stylesheet" href="../gitbook/style.css">
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        
    </body>
</html>
