<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Asioiden kumoaminen | Learn Git</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="GitbookIO">
        <meta name="description" content="The entire Pro Git book.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../gitin_perusteet/working_with_remotes.html" />
        
        
        <link rel="prev" href="../gitin_perusteet/pysyvien_muutosten_historian_tarkasteleminen.html" />
        

        <meta property="og:title" content="Asioiden kumoaminen | Learn Git">
        <meta property="og:site_name" content="Learn Git">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/GitbookIO">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

        
        <link rel="stylesheet" href="../gitbook/style.css">
        
        
    </head>
    <body>
        
<div class="book" data-github="GitbookIO/git" data-level="2.4" data-basepath=".." data-revision="1396895597438">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="https://github.com/GitbookIO/git" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    <a href="https://github.com/GitbookIO/git/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/GitbookIO/git/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>


    <!-- Title -->
    <h1><a href="../" >Learn Git</a></h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        <li>
            <a href="https://github.com/GitbookIO" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/GitbookIO/git/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/GitbookIO/git/edit/master/gitin_perusteet/asioiden_kumoaminen.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="alkusanat/README.html">
                
                <a href="../alkusanat/README.html">
                    <i class="fa fa-check"></i> <b>1)</b> Alkusanat
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="alkusanat/versionhallinnasta.html">
                            
                            <a href="../alkusanat/versionhallinnasta.html">
                                <i class="fa fa-check"></i> <b>1.1)</b> Versionhallinnasta
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="alkusanat/gitin_lyhyt_historia.html">
                            
                            <a href="../alkusanat/gitin_lyhyt_historia.html">
                                <i class="fa fa-check"></i> <b>1.2)</b> Gitin lyhyt historia
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="alkusanat/gitin_perusteet.html">
                            
                            <a href="../alkusanat/gitin_perusteet.html">
                                <i class="fa fa-check"></i> <b>1.3)</b> Gitin perusteet
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="alkusanat/gitin_asennus.html">
                            
                            <a href="../alkusanat/gitin_asennus.html">
                                <i class="fa fa-check"></i> <b>1.4)</b> Gitin asennus
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="alkusanat/ensikerran_git_asetukset.html">
                            
                            <a href="../alkusanat/ensikerran_git_asetukset.html">
                                <i class="fa fa-check"></i> <b>1.5)</b> Ensikerran Git-asetukset
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="alkusanat/avunsaanti.html">
                            
                            <a href="../alkusanat/avunsaanti.html">
                                <i class="fa fa-check"></i> <b>1.6)</b> Avunsaanti
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path="alkusanat/yhteenveto.html">
                            
                            <a href="../alkusanat/yhteenveto.html">
                                <i class="fa fa-check"></i> <b>1.7)</b> Yhteenveto
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="gitin_perusteet/README.html">
                
                <a href="../gitin_perusteet/README.html">
                    <i class="fa fa-check"></i> <b>2)</b> Gitin perusteet
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="gitin_perusteet/git_tietolahteen_hankinta.html">
                            
                            <a href="../gitin_perusteet/git_tietolahteen_hankinta.html">
                                <i class="fa fa-check"></i> <b>2.1)</b> Git-tietolähteen hankinta
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="gitin_perusteet/muutosten_tallennus_tietolahteeseen.html">
                            
                            <a href="../gitin_perusteet/muutosten_tallennus_tietolahteeseen.html">
                                <i class="fa fa-check"></i> <b>2.2)</b> Muutosten tallennus tietolähteeseen
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="gitin_perusteet/pysyvien_muutosten_historian_tarkasteleminen.html">
                            
                            <a href="../gitin_perusteet/pysyvien_muutosten_historian_tarkasteleminen.html">
                                <i class="fa fa-check"></i> <b>2.3)</b> Pysyvien muutosten historian tarkasteleminen
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="gitin_perusteet/asioiden_kumoaminen.html">
                            
                            <a href="../gitin_perusteet/asioiden_kumoaminen.html">
                                <i class="fa fa-check"></i> <b>2.4)</b> Asioiden kumoaminen
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="gitin_perusteet/working_with_remotes.html">
                            
                            <a href="../gitin_perusteet/working_with_remotes.html">
                                <i class="fa fa-check"></i> <b>2.5)</b> Working with Remotes
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="gitin_perusteet/tagging.html">
                            
                            <a href="../gitin_perusteet/tagging.html">
                                <i class="fa fa-check"></i> <b>2.6)</b> Tagging
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.7" data-path="gitin_perusteet/tips_and_tricks.html">
                            
                            <a href="../gitin_perusteet/tips_and_tricks.html">
                                <i class="fa fa-check"></i> <b>2.7)</b> Tips and Tricks
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.8" data-path="gitin_perusteet/summary.html">
                            
                            <a href="../gitin_perusteet/summary.html">
                                <i class="fa fa-check"></i> <b>2.8)</b> Summary
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
    </ul>
</div>

    <div class="book-body" tabindex="-1">
        <div class="body-inner">
            <div class="page-wrapper">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 76.47058823529412%;min-width: 70.58823529411765%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../alkusanat/README.html" title="Alkusanat" class="chapter done new-chapter" data-progress="1" style="left: 5.882352941176471%;"></a>
    
        <a href="../alkusanat/versionhallinnasta.html" title="Versionhallinnasta" class="chapter done " data-progress="1.1" style="left: 11.764705882352942%;"></a>
    
        <a href="../alkusanat/gitin_lyhyt_historia.html" title="Gitin lyhyt historia" class="chapter done " data-progress="1.2" style="left: 17.647058823529413%;"></a>
    
        <a href="../alkusanat/gitin_perusteet.html" title="Gitin perusteet" class="chapter done " data-progress="1.3" style="left: 23.529411764705884%;"></a>
    
        <a href="../alkusanat/gitin_asennus.html" title="Gitin asennus" class="chapter done " data-progress="1.4" style="left: 29.41176470588235%;"></a>
    
        <a href="../alkusanat/ensikerran_git_asetukset.html" title="Ensikerran Git-asetukset" class="chapter done " data-progress="1.5" style="left: 35.294117647058826%;"></a>
    
        <a href="../alkusanat/avunsaanti.html" title="Avunsaanti" class="chapter done " data-progress="1.6" style="left: 41.1764705882353%;"></a>
    
        <a href="../alkusanat/yhteenveto.html" title="Yhteenveto" class="chapter done " data-progress="1.7" style="left: 47.05882352941177%;"></a>
    
        <a href="../gitin_perusteet/README.html" title="Gitin perusteet" class="chapter done new-chapter" data-progress="2" style="left: 52.94117647058823%;"></a>
    
        <a href="../gitin_perusteet/git_tietolahteen_hankinta.html" title="Git-tietolähteen hankinta" class="chapter done " data-progress="2.1" style="left: 58.8235294117647%;"></a>
    
        <a href="../gitin_perusteet/muutosten_tallennus_tietolahteeseen.html" title="Muutosten tallennus tietolähteeseen" class="chapter done " data-progress="2.2" style="left: 64.70588235294117%;"></a>
    
        <a href="../gitin_perusteet/pysyvien_muutosten_historian_tarkasteleminen.html" title="Pysyvien muutosten historian tarkasteleminen" class="chapter done " data-progress="2.3" style="left: 70.58823529411765%;"></a>
    
        <a href="../gitin_perusteet/asioiden_kumoaminen.html" title="Asioiden kumoaminen" class="chapter done " data-progress="2.4" style="left: 76.47058823529412%;"></a>
    
        <a href="../gitin_perusteet/working_with_remotes.html" title="Working with Remotes" class="chapter  " data-progress="2.5" style="left: 82.3529411764706%;"></a>
    
        <a href="../gitin_perusteet/tagging.html" title="Tagging" class="chapter  " data-progress="2.6" style="left: 88.23529411764706%;"></a>
    
        <a href="../gitin_perusteet/tips_and_tricks.html" title="Tips and Tricks" class="chapter  " data-progress="2.7" style="left: 94.11764705882354%;"></a>
    
        <a href="../gitin_perusteet/summary.html" title="Summary" class="chapter  " data-progress="2.8" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_116">
                    
                        <h1 id="asioiden-kumoaminen">Asioiden kumoaminen</h1>
<p>Saatat haluta kumota jotain missä tahansa työvaiheessa. Esittelemme tässä muutaman perustyökalun tekemiesi muutosten kumoamiseen. Ole huolellinen, koska et voi aina peruuttaa joitakin näistä kumoamisista. Tämä on yksi muutamasta alueesta Gitissä, joissa voit menettää jonkin verran työtä, jos teet sen väärin.</p>
<h2 id="viimeisimm-n-pysyv-n-muutoksen-muuttaminen">Viimeisimmän pysyvän muutoksen muuttaminen</h2>
<p>Yksi yleinen kumoaminen tapahtuu, kun teet pysyvän muutoksen liian aikaisin ja mahdollisesti unohdat lisätä joitakin tiedostoja tai sähläät pysyvän muutoksen viestin kanssa. Jos haluat yrittää tehdä pysyvää muutosta uudestaan, voit tehdä sen <code>--amend</code>-optiolla:</p>
<pre><code><span class="hljs-comment">$</span> <span class="hljs-comment">git</span> <span class="hljs-comment">commit</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">amend</span>
</code></pre><p>Tämä komento ottaa lavastusalueesi ja käyttää sitä pysyvään muutokseen. Jos et ole tehnyt muutoksia viimeisimmän pysyvän muutoksesi jälkeen (esimerkiksi, jos ajat tämän komennon heti edellisen pysyvän muutoksesi jälkeen), tilannekuvasi näyttää tarkalleen samalta ja kaikki, mitä muutat, on pysyvän muutoksesi viesti.</p>
<p>Sama pysyvän muutoksen viestin editori aktivoituu, mutta se sisältää jo viestin edellisestä pysyvästä muutoksesta. Voit muokata viestiä samoin kuin aina, mutta se korvaa edellisen pysyvän muutoksesi.</p>
<p>Esimerkkinä, jos teet pysyvän muutoksen ja sitten huomaat unohtaneesi lavastaa muutokset tiedostossa, jonka haluat lisätä tähän pysyvään muutokseen, voit tehdä jotakuinkin seuraavasti:</p>
<pre><code><span class="hljs-variable">$ </span>git commit -m <span class="hljs-string">'initial commit'</span>
<span class="hljs-variable">$ </span>git add unohtunut_tiedosto
<span class="hljs-variable">$ </span>git commit --amend
</code></pre><p>Näiden kolmen komennon jälkeen päädyt yhteen pysyvään muutokseen — toinen pysyvä muutos korvaa ensimmäisen.</p>
<h2 id="lavastetun-tiedoston-lavastuksen-purkaminen">Lavastetun tiedoston lavastuksen purkaminen</h2>
<p>Kaksi seuraavaa kappaletta havainnollistavat, kuinka paimentaa muutoksia lavastusalueellasi ja työskentelyhakemistossasi. Mukava osa on, että komento, jota käytät selvittääksesi näiden kahden alueen tilan, muistuttaa sinua myös, kuinka peruuttaa muutokset niihin. Sanokaamme, esimerkiksi, että olet muuttanut kahta tiedostoa ja haluat tehdä niistä kaksi erillistä pysyvää muutosta, mutta kirjoitit vahingossa <code>git add *</code> ja lavastit ne molemmat. Kuinka voit purkaa toisen lavastuksen? <code>Git status</code> -komento muistuttaa sinua:</p>
<pre><code>$ git add .
$ git status
<span class="hljs-preprocessor"># On branch master</span>
<span class="hljs-preprocessor"># Changes to be committed:</span>
<span class="hljs-preprocessor">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor">#       modified:   README.txt</span>
<span class="hljs-preprocessor">#       modified:   benchmarks.rb</span>
<span class="hljs-preprocessor">#</span>
</code></pre><p>Heti ”Changes to be committed” -tekstin alla, sanotaan &quot;use <code>git reset HEAD &lt;file&gt;...</code> to unstage&quot;. Joten, käyttäkäämme tätä neuvoa purkaaksemme <code>benchmarks.rb</code>-tiedoston lavastuksen:</p>
<pre><code>$ git reset<span class="hljs-constant"> HEAD </span>benchmarks.rb
benchmarks.rb: locally modified
$ git status
<span class="hljs-preprocessor"># On branch master</span>
<span class="hljs-preprocessor"># Changes to be committed:</span>
<span class="hljs-preprocessor">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor">#       modified:   README.txt</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor"># Changes not staged for commit:</span>
<span class="hljs-preprocessor">#   (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span class="hljs-preprocessor">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor">#       modified:   benchmarks.rb</span>
<span class="hljs-preprocessor">#</span>
</code></pre><p>Komento on hieman kummallinen, mutta se toimii. <code>Benchmarks.rb</code>-tiedosto on muokattu mutta lavastamaton jälleen.</p>
<h2 id="muutetun-tiedoston-muutosten-kumoaminen">Muutetun tiedoston muutosten kumoaminen</h2>
<p>Mitä, jos tajuat, ettet halua säilyttää muutoksiasi <code>benchmarks.rb</code>-tiedostoon? Kuinka voit helposti kumota sen muutokset — palauttaa sen takaisin sellaiseksi, miltä se näytti, kun teit viimeksi pysyvän muutoksen (tai alun perin kloonasit tai miten saitkaan sen työskentelyhakemistoosi)? Onneksi <code>git status</code> kertoo sinulle myös, miten tämä tehdään. Edellisessä esimerkkitulosteessa lavastamaton alue näyttää tältä:</p>
<pre><code><span class="hljs-preprocessor"># Changes not staged for commit:</span>
<span class="hljs-preprocessor">#   (use "git add &lt;file&gt;..." to update what will be committed)</span>
<span class="hljs-preprocessor">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor">#       modified:   benchmarks.rb</span>
<span class="hljs-preprocessor">#</span>
</code></pre><p>Se kertoo sinulle melko selvästi, kuinka hylätä tekemäsi muutokset (ainakin Gitin uudemmat versiot, 1.6.1 ja uudemmat, tekevät tämän — jos sinulla on vanhempi versio, suosittelemme lämpimästi sen päivittämistä saadaksesi joitakin näistä mukavammista käytettävyysominaisuuksista). Tehkäämme kuten se sanoo:</p>
<pre><code>$ git checkout -- benchmarks.rb
$ git status
<span class="hljs-preprocessor"># On branch master</span>
<span class="hljs-preprocessor"># Changes to be committed:</span>
<span class="hljs-preprocessor">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</span>
<span class="hljs-preprocessor">#</span>
<span class="hljs-preprocessor">#       modified:   README.txt</span>
<span class="hljs-preprocessor">#</span>
</code></pre><p>Voit nähdä, että muutokset on peruutettu. Sinun tulisi myös ymmärtää, että tämä on vaarallinen komento: kaikki tähän tiedostoon tekemäsi muutokset ovat mennyttä — kopioit juuri toisen tiedoston sen päälle. Älä koskaan käytä tätä komentoa ellet ehdottomasti tiedä, ettet halua säilyttää tiedostoa. Jos sinun täytyy ainoastaan saada se pois tieltä, käymme läpi kätkemisen ja haarautumisen seuraavassa luvussa; ne ovat usein parempia tapoja toimia.</p>
<p>Muista, että kaikki, mistä on tehty pysyvä muutos Gitiin, voidaan melkein aina palauttaa. Jopa poistetuissa haaroissa olleet tai <code>--amend</code>-optiolla ylikirjoitetut pysyvät muutokset voidaan palauttaa (katso <em>Luku 9</em> datan palauttamiseksi). Kuitenkin, mitään, minkä hävität ja mistä ei ole tehty pysyvää muutosta, ei nähdä todennäköisesti koskaan uudelleen.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../gitin_perusteet/pysyvien_muutosten_historian_tarkasteleminen.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../gitin_perusteet/working_with_remotes.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        
    </body>
</html>
